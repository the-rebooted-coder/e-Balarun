<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>E-Balarun 2026</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+Devanagari:wght@400;700&family=Playfair+Display:wght@400;700;900&family=Space+Grotesk:wght@300;500;700&display=swap" rel="stylesheet">
    
    <script src="https://cdn.jsdelivr.net/npm/page-flip/dist/js/page-flip.browser.js"></script>

    <style>
        :root {
            --bg-body: #111; 
            --paper: #F2F0E9;
            --text: #111;
            --accent: #D00000;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background-color: var(--bg-body);
            height: 100vh;
            width: 100vw;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Space Grotesk', sans-serif;
        }

        /* STAGE: Wrapper for centering */
        .stage {
            transition: transform 0.5s ease-out; /* Smooth slide */
            display: flex;
            justify-content: center;
            align-items: center;
            width: auto;
            height: auto;
        }

        /* PAGE STYLES */
        .page {
            background-color: var(--paper);
            overflow: hidden;
            border: 1px solid #dcdcdc;
            box-shadow: inset 4px 0 10px rgba(0,0,0,0.03);
        }

        .page-content {
            width: 100%;
            height: 100%;
            padding: 25px; /* Reduced padding for more space */
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            position: relative;
        }

        /* Hard Cover Spine */
        .cover-page { border-right: 4px solid #bbb; }

        /* --- TYPOGRAPHY --- */
        /* Title: Much smaller clamp to prevent overflow */
        h1 { 
            font-family: 'Playfair Display', serif; 
            color: var(--text); 
            line-height: 1; 
            text-transform: uppercase;
            font-weight: 900;
            text-align: center;
            font-size: clamp(1.8rem, 8vw, 3.5rem); /* Fixed overflow issue */
            margin: 10px 0;
            width: 100%;
            word-wrap: break-word; /* Safety break */
        }

        .hindi h1, .hindi h2 { font-family: 'Noto Serif Devanagari', serif; }

        /* HEADER */
        .header {
            width: 100%;
            border-bottom: 2px solid var(--text);
            padding-bottom: 10px;
            display: flex;
            justify-content: space-between;
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* CENTER BLOCK */
        .center-block {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            width: 100%;
        }

        .logo {
            width: 120px;
            height: auto;
            margin-bottom: 15px;
        }

        .year {
            color: var(--accent);
            font-weight: 700;
            letter-spacing: 3px;
            text-transform: uppercase;
            font-size: 0.8rem;
            margin-bottom: 5px;
        }

        /* FOOTER ACTIONS */
        .footer {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            width: 100%;
            padding-top: 15px;
        }

        /* Language Button */
        .lang-btn {
            background: transparent;
            border: 1px solid var(--text);
            padding: 5px 16px;
            border-radius: 50px;
            cursor: pointer;
            font-family: 'Space Grotesk', sans-serif;
            font-weight: 700;
            font-size: 0.7rem;
            transition: all 0.2s;
        }
        .lang-btn:hover { background: var(--text); color: var(--paper); }

        /* Open Prompt */
        .open-btn {
            cursor: pointer;
            text-align: center;
            opacity: 0.8;
            transition: 0.3s;
        }
        .open-btn:hover { opacity: 1; transform: translateY(-2px); }
        .arrow { font-size: 1.5rem; color: var(--accent); display: block; line-height: 1; margin-bottom: 5px; }

        /* VIDEO CONTAINER */
        .video-box {
            width: 100%;
            aspect-ratio: 16/9;
            background: #000;
            margin: 20px 0;
            border: 2px solid var(--text);
            box-shadow: 6px 6px 0 rgba(0,0,0,0.15);
        }
        iframe { width: 100%; height: 100%; }

        /* MOBILE FIXES */
        @media (max-width: 768px) {
            .arrow { transform: rotate(90deg); }
            .page-content { padding: 20px; }
            h1 { font-size: clamp(1.8rem, 10vw, 3rem); } /* Even smaller for mobile safety */
        }
    </style>
</head>
<body id="body-app">

    <div class="stage" id="stage-app">
        
        <div id="book-app">
            
            <div class="page cover-page" data-density="hard">
                <div class="page-content">
                    
                    <div class="header">
                        <span id="txt-digital">Digital Edition</span>
                        <span id="txt-vol">Vol. 1</span>
                    </div>

                    <div class="center-block">
                        <img src="https://i.ibb.co/yFpnpVTy/balarun-logo.png" alt="Logo" class="logo">
                        <div class="year" id="txt-year">Year 2026</div>
                        <h1 id="txt-title">E-Balarun</h1>
                    </div>

                    <div class="footer">
                        <button class="lang-btn" onclick="toggleLang()" id="btn-lang">हिंदी</button>
                        
                        <div class="open-btn" onclick="flipNext()">
                            <span class="arrow" id="icon-arrow">➜</span>
                            <span style="font-size:0.7rem; font-weight:700; letter-spacing:1px;" id="txt-hint">CLICK TO OPEN</span>
                        </div>
                    </div>

                </div>
            </div>

            <div class="page" data-density="soft">
                <div class="page-content">
                    <div style="flex:1; display:flex; justify-content:center; align-items:center; opacity:0.1;">
                        <img src="https://i.ibb.co/yFpnpVTy/balarun-logo.png" style="width:100px; filter:grayscale(1);">
                    </div>
                </div>
            </div>

            <div class="page" data-density="soft">
                <div class="page-content">
                    <div>
                        <h2 style="font-family:'Playfair Display', serif; font-size:1.5rem; border-bottom:1px solid #ccc; padding-bottom:10px; margin-bottom:20px;" id="txt-msg">Message from Principal</h2>
                        
                        <div class="video-box">
                             <iframe src="https://www.youtube.com/embed/CzQg5KaU26g" title="Principal Video" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                        </div>
                    </div>
                </div>
            </div>

            <div class="page cover-page" data-density="hard">
                <div class="page-content">
                    <div style="margin-top:auto; text-align:right;">
                        <div style="display:flex; justify-content:flex-end; gap:3px; height:25px; margin-bottom:10px; opacity:0.7;">
                            <div style="width:2px; background:#000;"></div><div style="width:4px; background:#000;"></div>
                            <div style="width:1px; background:#000;"></div><div style="width:3px; background:#000;"></div>
                            <div style="width:2px; background:#000;"></div><div style="width:1px; background:#000;"></div>
                        </div>
                        <span style="display:block; font-size:0.7rem; text-transform:uppercase;" id="txt-made">Made in</span>
                        <span style="font-family:'Playfair Display', serif; font-size:1.5rem;" id="txt-loc">Jabalpur</span>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script>
        // --- TEXT DATA ---
        const content = {
            en: {
                digital: "Digital Edition",
                vol: "Vol. 1",
                year: "Year 2026",
                title: "E-Balarun",
                hint: "CLICK TO OPEN",
                hintMob: "SWIPE TO OPEN",
                msg: "Message from Principal",
                made: "Made in",
                loc: "Jabalpur",
                btn: "हिंदी"
            },
            hi: {
                digital: "डिजिटल संस्करण",
                vol: "खंड १",
                year: "वर्ष 2026",
                title: "ई-बालारुण",
                hint: "खोलने के लिए क्लिक करें",
                hintMob: "खोलने के लिए स्वाइप करें",
                msg: "प्राचार्य महोदय का संदेश",
                made: "स्थान",
                loc: "जबलपुर",
                btn: "English"
            }
        };

        let currentLang = 'en';
        let pageFlip;
        const stage = document.getElementById('stage-app');

        document.addEventListener('DOMContentLoaded', () => {
            const el = document.getElementById('book-app');
            
            // 1. DIMENSIONS
            // Keep it compact to avoid overflow on small screens
            const screenW = window.innerWidth;
            const screenH = window.innerHeight;
            
            // Width limited to 400px or 90% of screen
            const pWidth = Math.min(400, screenW * 0.9);
            const pHeight = Math.min(600, screenH * 0.85);

            pageFlip = new St.PageFlip(el, {
                width: pWidth,
                height: pHeight,
                size: "fixed",
                showCover: true,
                mobileScrollSupport: false
            });

            pageFlip.loadFromHTML(document.querySelectorAll('.page'));

            // 2. CENTERING LOGIC (Fixed)
            const alignBook = () => {
                // If window width > 768, library uses Spread Mode.
                const isSpread = window.innerWidth > 768;

                if (isSpread) {
                    const pageIndex = pageFlip.getCurrentPageIndex();
                    
                    if (pageIndex === 0) {
                        // Book Closed (Cover). Cover is Right Page.
                        // We must shift the entire container LEFT by 25% to center the right page.
                        stage.style.transform = `translateX(-25%)`; 
                    } else if (pageIndex === pageFlip.getPageCount() - 1) {
                        // Back Cover. Shift RIGHT.
                        stage.style.transform = `translateX(25%)`;
                    } else {
                        // Open. Center.
                        stage.style.transform = `translateX(0)`;
                    }
                } else {
                    // Mobile (Single Page). Always Center.
                    stage.style.transform = `translateX(0)`;
                    
                    // Mobile Text Updates
                    document.getElementById('txt-hint').textContent = content[currentLang].hintMob;
                    document.getElementById('icon-arrow').style.transform = "rotate(-90deg)";
                }
            };

            // Event Listeners
            pageFlip.on('flip', alignBook);
            pageFlip.on('changeState', alignBook);
            
            // Delay initial align to ensure library render
            setTimeout(alignBook, 150);
            window.addEventListener('resize', alignBook);
        });

        function flipNext() { pageFlip.flipNext(); }

        function toggleLang() {
            currentLang = currentLang === 'en' ? 'hi' : 'en';
            const data = content[currentLang];
            const b = document.getElementById('body-app');

            if(currentLang === 'hi') b.classList.add('hindi');
            else b.classList.remove('hindi');

            setText('txt-digital', data.digital);
            setText('txt-vol', data.vol);
            setText('txt-year', data.year);
            setText('txt-title', data.title);
            setText('txt-msg', data.msg);
            setText('txt-made', data.made);
            setText('txt-loc', data.loc);
            setText('btn-lang', data.btn);

            if(window.innerWidth > 768) setText('txt-hint', data.hint);
            else setText('txt-hint', data.hintMob);
        }

        function setText(id, txt) {
            const e = document.getElementById(id);
            if(e) e.textContent = txt;
        }
    </script>
</body>
</html>